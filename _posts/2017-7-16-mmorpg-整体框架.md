---
layout:     post                    # 使用的布局（不需要改）
title:      多人在线游戏项目              # 标题 
subtitle:     #副标题
date:       2017-7-17              # 时间
author:     co                      # 作者
header-img: img/post-bg-2015.jpg    #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - 项目
---

这是我们实际开发的一个多人在线角色扮演类游戏的整体框架。该游戏类似吃鸡，但pk不是射击，而是互相打斗。通过匹配会进入战斗场景，进行战斗。框架主要进程分为下面五个。
- db
- gate
- login
- hall
- fight

这个架构跟之前讲架稍有不同。我们这里所有的客户端消息会先发送到gate，gate来继续转发。包括登录验证，也是先经过gate，转发给login，然后进行后续操作。

#### gate
这里是网络数据转发的地方。也包括心跳检测和一些过滤操作。
#### login
这个是我们登录验证的地方。我们的登录表现是这样：
- 先输入帐号密码进行登录
- 创建玩家角色
- 进入到主地图

实现上是通过login进行验证，然后通知hall创建角色，最后进入hall。
#### hall
hall里面包括了除了战斗外的所有模块。主要有场景中的实体管理，匹配，好友，聊天，签到，等等各种模块。
#### fight
fight主要是处理战斗场景里面的所有内容。包括场景中的实体管理，技能，移动等等。
#### db
db主要使用redis和mysql。负责所有的数据处理工作。接收其他节点的数据请求。
#### 业务逻辑
关于业务逻辑。我这里说的是比如技能，buff，各种模块。我们的实现是每个玩家身上带多个管理器，比如技能管理器，buff管理器等等。以前我们的实现是一个容器里面存放所有玩家的技能，每次需要的时候调用容器来处理。
#### 总结 

#### 结束