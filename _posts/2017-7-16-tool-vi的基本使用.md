---
layout:     post                    # 使用的布局（不需要改）
title:      vi编辑器基本使用               # 标题 
subtitle:     #副标题
date:       2016-7-16              # 时间
author:     co                      # 作者
header-img: img/post-bg-2015.jpg    #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - tool
---

我们平时写代码是通过远程工具把代码写好后，上传给linux的。但是有时候也需要直接修改linux上的文件，一般通过vi编辑器来编辑文本。所以有必要稍微了解下vi的基本操作。

#### vi的基本状态
vi有两种状态：命令状态和插入状态。输入 字符 `i` 进入插入状态，按下 `ESC` 键，就是进入命令行状态。
- 在命令状态时，你的键盘输入都当作是vi命令处理。
- 在插入状态时，你的键盘输入都当作是在编辑文本内容。

在命令状态时，一般看不到自己输入了什么。有时候想看到自己输入了什么，也可以先输入`:`加上`命令`，这样输入就会直接显示在vi最底部了。
#### 命令行状态的命令
- :wq 保存并退出vi编辑器
- :q! 强制退出bi编辑器
- :w filename 表示另存为 filename ，跟window类似。

#### 光标移动
光标的移动我们可以使用 上下左右键 ，也可以使用` j 下 k 上  h 左 l 右 `这四个键排成一行，就是右手默认放置在键盘的范围。 
- 0 数字0: 表示跳转到当前行的 行首
- $ 美元符号: 表示跳转到当前行的 行尾 //这个有点类似模式匹配的尾部

- H //大小的H，即 home的意思。
有时候我们需要回到 **当前这一屏** 的首位置，也就是当前这一屏的左上角位置，【注意跟文件内容的第一行的一个字符的位置区别】
- M //当前这一屏的 中间行的行首 
- L //当前这一屏的 中间行的行末

有时候需要一大块一大块的移动来查看，也就是需要类似翻页查看。
- ctrl + b // 
- ctrl + f

有时候我们想直接跳转到某个指定行
- :7 //跳转到第7行



#### 显示文件行号
- :set nu //显示行号
- :set nonu //不显示行号

#### 删除行
- dd //先移动到指定行，然后 dd 即可删除该行 
- :3,7d //表示删除 3到7行


#### 撤销
- u

撤销的过程是这样：在插入状态输入了 aaa ，然后ESC，然后 u，那么刚刚输入的aaa就撤销了。也就是还原点的位置是以ESC键被按下来划分。每一次 撤销操作 ，都恢复到 上一次按下 ESC 的时刻。 

#### 查找
- /this //从光标位置开始往下查找 this ，要继续查找 按 n  
- ？this //从官表位置开始往上查找 this ，要继续查找 按 n  

#### 替换
- :3,7s/this/david/g  //把第三个到第七行的所有this替换成david。这里的`s`是替换的意思，最后的`g`表示整体的意思

不用`g`表示只替换每一行找到的第一个this

有时候我们需要替换所有的行，那么需要先知道总共有多少行(**因为必须要给出具体的参数范围**)。至少三种办法
- ctlr+g 会显示总行数。
- G //回到最后一行，自然就知道有多少行
- $ //美元符号代表的就是最后一行 ，所以替换所有可以这样 :1,$s/this/david/g

> %s/this/david/g 也可以整体替换，实际上 `%` 就代表所有行。

#### xshell 键盘右边的数字键盘无法正常使用的解决方法

文件 ->属性  ->VT模式 ->设置为普通即可

#### 总结
基本上平时在window上使用编辑器的内容就是这样了。
#### 结束